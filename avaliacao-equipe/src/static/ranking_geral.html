<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Ranking Geral</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h2>ðŸ“Š Ranking Geral de Avaliados</h2>
  <table id="ranking-table" border="1">
  <thead>
    <tr>
      <th>PosiÃ§Ã£o</th>
      <th>FuncionÃ¡rio</th>
      <th>Cargo</th>
      <th>Avaliador</th>
      <th>AutoavaliaÃ§Ã£o</th>
      <th>MÃ©dia Geral</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
async function carregarRanking() {
    const res = await fetch('/api/ranking-geral');
    if (!res.ok) {
        alert("Acesso negado ou nÃ£o autenticado");
        return;
    }
    const dados = await res.json();
    const tbody = document.querySelector("#ranking-table tbody");

    dados.forEach((item, idx) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${idx + 1}</td>
            <td>${item.funcionario}</td>
            <td>${item.cargo}</td>
            <td>${item.avaliador}</td>
            <td>${item.autoavaliacao ?? "-"}</td>
            <td>${item.media_geral ?? "-"}</td>
        `;
        tbody.appendChild(tr);
    });
}

carregarRanking();
</script>

  
</body>
</html>
